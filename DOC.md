### 可能有用的策略

1. 监控 btc 每小时变化幅度，判定基本盘是震荡还是趋势


### 抢币心得

1. 如果是上币当天是普遍涨，那应该不会破发，可以直接抢买(第一时间抢购有可能买到比较高的价格，币安的初始定价很坑爹)
2. 如果感觉上去就破发，那应该第一时间就把挖到的币抢卖了
3. 合约初始的价格会比较靠谱，但是如果不能确定上去就涨的话，也少买因为初始交易量很少，不能一下买到最优价格，如果买到多会把你的订单打散成很多个提高你的购买均价
4. 小发现，币安的订单号竟然用的是自增ID，根据订单号就能知道你买的时间
5. 新币上线的价格预测，根据之前大家了解到的情况，挂一个大致的订单，例如大家都是预测0.4-0.6之间，可以尝试在第一时间挂单位0.4 * 0.7 = 0.28 的单，测试一下如果用程序第一时间挂单，能否买进，测试了几次，第一时间挂市价单，通常会比手动第一秒买入的价格还高


### 问题
1. spot 的 ws 正式 url 报错，走的 test url


### 数据库修复

```
PRAGMA integrity_check; // 检查
VACUUM; // 修复
```


### 当前系统请求权重统计
> 目前币安限制为 1 分钟 2400 权重

#### 测试策略开仓
> 3 次 kline 接口(3m,1h,4h), 一次权重 2, 一次 5 种币, 1.5 秒执行一次: 3 * 2 * 5 * 40

#### 测试策略平仓 
> 3 次 kline 接口(3m,1h,4h), 一次权重 2, 当前仓位数量 X(只有收益在配置的止盈和止损范围外才进行后续策略), 1.5 秒执行一次: 3 * 2 * X * 40

#### 仓位正负转换通知
> 1 次 position 接口， 一次权重5(这个很可疑感觉不止5)，10秒执行一次: 5 * 10
> 如果使用 ws 则不需要请求 api

#### 合约自定义策略执行
1. 获取 position(权重5，这个很可疑感觉不止5, ws 时为 0)
2. 获取 open_order (权重40, ws 时为 0)
3. 检查平仓(3 次 kline 接口(3m,1h,4h), 一次权重 2, 当前仓位数量 X(只有收益在配置的止盈和止损范围外才进行后续策略), 3 * 2 * X)
4. 检查开仓(3 次 kline 接口(3m,1h,4h), 一次权重 2, 一次 5 种币, 3 * 2 * 5), 如果确实要开仓，获取深度接口(权重2), 设置杠杆(权重1), 设置仓位模式(权重1), 下单接口(有自身独特的权重)
5. 2秒一次
6. 总结: 开仓 900 + 平仓感觉有 200 + 其它 100

#### 抢购
> 获取币种信息 1, 0.1秒执行一次: 600

#### 币种通知
> 获取币种最新价格 1, 币种数量 X, 2秒一次: 30 * X

#### 行情监听
> 自定义策略， k 线 2, 币种数量 X, 2秒一次: 60 * X

### 想法

1. btc(最近1小时涨幅) 0.6 + eth 0.2 + bnb 0.1 + sol 0.1
2. 根据 1 的值，自定义选用不同的策略，大幅度涨跌的话选用 boll1
3. 提前定义好几种策略，选用一种进行当前行情测试，当发现几次都是亏损时，自动切换到别的策略上
4. 允许同一个仓位加仓多次


